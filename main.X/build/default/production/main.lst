MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;******************************************************************************;
                      00002 ;        ____    ___  ______    ___  ____       ____  ____  ____    ___  ____  ;
                      00003 ;       |    \  /  _]|      T  /  _]|    \     |    \l    j|    \  /  _]|    \ ;
                      00004 ;       |  o  )/  [_ |      | /  [_ |  D  )    |  o  )|  T |  o  )/  [_ |  D  );
                      00005 ;       |   _/Y    _]l_j  l_jY    _]|    /     |   _/ |  | |   _/Y    _]|    / ;
                      00006 ;       |  |  |   [_   |  |  |   [_ |    \     |  |   |  | |  |  |   [_ |    \ ;
                      00007 ;       |  |  |     T  |  |  |     T|  .  Y    |  |   j  l |  |  |     T|  .  Y;
                      00008 ;       l__j  l_____j  l__j  l_____jl__j\_j    l__j  |____jl__j  l_____jl__j\_j;
                      00009 ;------------------------------------------------------------------------------;
                      00010 ;               AER201 Team 61 'Peter Piper' Pipe Inspector                    ;
                      00011 ;                        Author: Omar Abdeldayem                               ;
                      00012 ;                           Created: 1/12/2016                                 ;
                      00013 ;------------------------------------------------------------------------------;
                      00014 ; DESCRIPTION:                                                                                          
                                                               ;
                      00015 ; It does shit, yo.                                                                                     
                                                               ;
                      00016 ;******************************************************************************;
                      00017 ;******************************************************************************;
                      00018 ;******************************************************************************;
                      00019 
                      00020         List    p=16f877                    ; list directive to define processor
                      00021         #include        <p16f877.inc>       ; processor specific variable definitions
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Dec 08 2015
                      00005 ;  MPASM PIC16F877 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2015 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00541         LIST
2007   3F72           00022         __CONFIG _CP_OFF & _WDT_OFF & _BODEN_ON & _PWRTE_ON & _HS_OSC & _WRT_ENABLE_ON & _CPD_OFF & _LVP
                            _OFF
                      00023 
                      00024 
                      00025 ;******************************************************************************;
                      00026 ;                               BANK0 RAM                                      ;
                      00027 ;******************************************************************************;
                      00028         CBLOCK      0x30
                      00029         ; RTC I2C Mem
  00000030            00030         dt1
  00000031            00031         dt2
  00000032            00032         dt3
  00000033            00033         XBUF
  00000034            00034         count
  00000035            00035         CONTROL
  00000036            00036         ADD
  00000037            00037         DAT
  00000038            00038         flag
  00000039            00039         DOUT
  0000003A            00040         B1
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000003B            00041         B2
                      00042         ; LCD MEM
  0000003C            00043         lcd_tmp
  0000003D            00044         lcd_d1
  0000003E            00045         lcd_d2
  0000003F            00046         long_del
  00000040            00047         temp_w
  00000041            00048         temp_status
                      00049         ; MULTIPLICATION VALS
  00000042            00050         mult_val1
  00000043            00051         mult_val2
                      00052         ; ROBOT VARS
  00000044            00053         pwm_state
  00000045            00054         threshold_distance
  00000046            00055         rob_distance
  00000047            00056         measured_distance
  00000048            00057         p_gain
  00000049            00058         l_pwm_duty
  0000004A            00059         r_pwm_duty
  0000004B            00060         spot_count
  0000004C            00061         num_spots
  0000004D            00062         spot_base_loc
                      00063         ENDC
                      00064 
                      00065 ;******************************************************************************;
                      00066 ;                               EQUATES                                        ;
                      00067 ;******************************************************************************;
  00000002            00068 RS      EQU             2
  00000003            00069 E       EQU             3
                      00070 
                      00071 ;******************************************************************************;
                      00072 ;                               MACROS                                         ;
                      00073 ;******************************************************************************;
                      00074 TOASCII macro       msd
                      00075         MOVWF       msd           
                      00076         SWAPF       msd,W        
                      00077         ANDLW       0x0F                      
                      00078         ADDLW       -10                    
                      00079         BTFSC       STATUS, C
                      00080         ADDLW       'A'-'0'-10
                      00081         ADDLW       '0'+10
                      00082         XORWF       msd, F        
                      00083         XORWF       msd, W        
                      00084         XORWF       msd, F        
                      00085         ANDLW       0x0F              
                      00086         ADDLW       -10               
                      00087         BTFSC       STATUS, C
                      00088         ADDLW       'A'-'0'-10
                      00089         ADDLW       '0'+10            
                      00090         endm
                      00091         
                      00092 MULT    macro       val1, val2, result
                      00093         MOVF        val1, W
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00094         ADDWF       val1, W
                      00095         MOVWF       result
                      00096         DECFSZ      val2, f
                      00097         GOTO        $-3
                      00098         endm
                      00099         
                      00100 WRT_LCD macro       val
                      00101         MOVLW       val
                      00102         CALL        LCD_CMD
                      00103         endm
                      00104 
                      00105 WRT_MEM_LCD macro   val
                      00106         MOVFW       val
                      00107         CALL        LCD_CMD
                      00108         endm
                      00109 
                      00110 LCD_DLY macro                           ;Delay ~160us
                      00111         MOVLW       0xFF
                      00112         MOVWF       lcd_d1
                      00113         DECFSZ      lcd_d1, f
                      00114         GOTO        $-1
                      00115         endm
                      00116 
                      00117 ;******************************************************************************;
                      00118 ;                          VECTOR TABLE                                        ;
                      00119 ;******************************************************************************;
                      00120         ORG         0x0000              ; RESET vector must always be at 0x00
0000   2???           00121         GOTO        INIT                ; Just jump to the main code section.
                      00122         ORG         0x0004
0004   2???           00123         GOTO        INT_HANDLER
                      00124 
                      00125 ;******************************************************************************;
                      00126 ;                         ROBOT INITIALIZATION                                 ;
                      00127 ;******************************************************************************;
0005                  00128 INIT
0005   1683           00129         BSF             STATUS, RP0     ;Select bank 1
                      00130 
                      00131         ; PIN MAPPINGS AND INITIALIZATION
0006   3018           00132         MOVLW       b'00011000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0007   0085           00133         MOVWF       TRISA
0008   30F3           00134         MOVLW       b'11110011'         ; Set required keypad inputs
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0009   0086           00135         MOVWF       TRISB
000A   3079           00136         MOVLW       b'01111001'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000B   0087           00137         MOVWF       TRISC
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000C   0188           00138         CLRF        TRISD               ; All port D is output
000D   3007           00139         MOVLW       b'00000111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000E   0089           00140         MOVWF       TRISE
                      00141                      
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000F   3080           00142         MOVLW       b'10000000'         ; PWM pulsing period (484Hz)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0010   0092           00143         MOVWF       PR2
                      00144         
0011   1283           00145         BCF         STATUS, RP0         ; select bank 0
                      00146         
0012   0195           00147         CLRF        CCPR1L              ; Setup PWM pins
0013   019B           00148         CLRF        CCPR2L
0014   300C           00149         MOVLW       B'00001100'
0015   0097           00150         MOVWF       CCP1CON
0016   009D           00151         MOVWF       CCP2CON
                      00152         
0017   158B           00153         BSF         INTCON, RBIE        ; Setup and enable interrupts
0018   160B           00154         BSF         INTCON, INTE
0019   178B           00155         BSF         INTCON, GIE
                      00156         
001A   3002           00157         MOVLW       B'00000010'         ; Initialize and start timer 2
001B   0092           00158         MOVWF       T2CON
001C   0191           00159         CLRF        TMR2
001D   1512           00160         BSF         T2CON, TMR2ON
                      00161         
001E   0185           00162         CLRF        PORTA
001F   0187           00163         CLRF        PORTC
0020   2???           00164         CALL        LCD_INIT            ; Initialize the LCD 
                      00165         
                      00166                                         ; Initialize RTC time
                      00167 ;       CLRF        DAT                 ;Set data to 0
                      00168 ;        CLRF        ADD                        ;Set register address to 0
                      00169 ;        CALL        wr                 ;Write 0 to Seconds
                      00170 ;        BSF         ADD,0              ;Set register address to 1
                      00171 ;        CALL        wr                 ;Write 0 to Minutes
                      00172         
0021   2???           00173         CALL        START_MSG
                      00174 
                      00175 ;******************************************************************************;
                      00176 ;                        ROBOT START AND STANDBY                               ;
                      00177 ;******************************************************************************;
0022                  00178 START_STDBY
0022   1C86           00179         BTFSS       PORTB, 1            ; Wait until data is available from the keypad
0023   2???           00180         GOTO        START_STDBY
                      00181 
0024   0E06           00182         SWAPF       PORTB, W            ; Read PortB<7:4> into W<3:0>
0025   390F           00183         ANDLW       0x0F
0026   2???           00184         CALL        CLR_LCD
                      00185 
0027   1886           00186         BTFSC       PORTB,1             ; Wait until key is released
0028   2???           00187         GOTO        $-1
                      00188         
0029   1685           00189         BSF         PORTA, 5
002A   2???           00190         CALL        CLR_LCD
002B   1285           00191         BCF         PORTA, 5
002C   2???           00192         GOTO        SCAN
                      00193 
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00194 ;******************************************************************************;
                      00195 ;                           SENSOR CALIBRATION                                 ;
                      00196 ;******************************************************************************;
002D                  00197 CALIBRATE
002D   2???           00198         GOTO        CALIBRATE
                      00199         
                      00200 ;******************************************************************************;
                      00201 ;                         PIPE SCAN SUPERLOOP                                  ;
                      00202 ;******************************************************************************;
002E                  00203 SCAN
002E   2???           00204         CALL        PWML
002F   2???           00205         CALL        PWMR
0030   2???           00206         CALL        USONIC_SEND_PULSE
0031   2???           00207         CALL        USONIC_READ_ECHO
0032   2???           00208         GOTO        SCAN
                      00209         
                      00210 ;******************************************************************************;
                      00211 ;                          INTERRUPT HANDLER                                   ;
                      00212 ;******************************************************************************;
0033                  00213 INT_HANDLER
0033   00C0           00214         MOVWF       temp_w
0034   0E03           00215         SWAPF       STATUS, W
0035   00C1           00216         MOVWF       temp_status
                      00217         
0036   100B           00218         BCF         INTCON, RBIF
0037   108B           00219         BCF         INTCON, INTF          ; Clear the interrupt flag
0038   0E41           00220         SWAPF       temp_status, W
0039   0083           00221         MOVWF       STATUS
003A   0EC0           00222         SWAPF       temp_w, F
003B   0E40           00223         SWAPF       temp_w, W
003C   0009           00224         RETFIE
                      00225         
                      00226 ;******************************************************************************;
                      00227 ;                           PWM CONTROL                                        ;
                      00228 ;******************************************************************************;
003D                  00229 PWML    
003D   1085           00230         BCF         PORTA, 1
                      00231         ;BCF        PORTA, 2
Message[305]: Using default destination of 1 (file).
003E   0F95           00232         INCFSZ      CCPR1L
003F   2???           00233         GOTO        PWML
0040   1485           00234 PWML_DN BSF         PORTA, 1
                      00235         ;BSF        PORTA, 2
Message[305]: Using default destination of 1 (file).
0041   0B95           00236         DECFSZ      CCPR1L
                      00237 ;       DECFSZ      CCPR2L
                      00238 ;       DECFSZ      CCPR1L
0042   2???           00239         GOTO        PWML_DN
                      00240         ;DECF       CCPR2L
0043   0008           00241         RETURN
                      00242 
0044                  00243 PWMR    
                      00244         ;BCF        PORTA, 1
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0044   1105           00245         BCF         PORTA, 2
Message[305]: Using default destination of 1 (file).
0045   0F9B           00246         INCFSZ      CCPR2L
0046   2???           00247         GOTO        PWMR
0047                  00248 PWMR_DN ;BSF        PORTA, 1
0047   1505           00249         BSF         PORTA, 2
Message[305]: Using default destination of 1 (file).
0048   0B9B           00250         DECFSZ      CCPR2L
                      00251 ;       DECFSZ      CCPR2L
                      00252 ;       DECFSZ      CCPR1L
0049   2???           00253         GOTO        PWMR_DN
                      00254         ;DECF       CCPR2L
004A   0008           00255         RETURN
                      00256         
                      00257 ;******************************************************************************;
                      00258 ;                       TOGGLE ARM STATE ROUTINE                               ;
                      00259 ;******************************************************************************;
004B                  00260 ARM_TOGGLE
                      00261         ; control servo to control arm
                      00262         ; if degree is set to 180, set to 0
                      00263         ; otherwise set to 0
004B   2???           00264         GOTO        ARM_TOGGLE
                      00265 
                      00266 ;******************************************************************************;
                      00267 ;                         ROBOT REALIGNMENT ROUTINE                            ;
                      00268 ;******************************************************************************;
004C                  00269 REALIGN
004C   0103           00270         CLRW
004D   0845           00271         MOVF        threshold_distance, W
Warning[202]: Argument out of range.  Least significant bits used.
004E   0247           00272         SUBWF       measured_distance, rob_distance
004F   0846           00273         MOVF        rob_distance, W
0050   07C9           00274         ADDWF       l_pwm_duty, F
0051   02CA           00275         SUBWF       r_pwm_duty, F
0052   0008           00276         RETURN
                      00277         
                      00278 ;******************************************************************************;
                      00279 ;                       END-OF-PIPE SERVICE ROUTINE                            ;
                      00280 ;******************************************************************************;
0053                  00281 END_ISR
0053   0008           00282         RETURN
                      00283 
                      00284 ;******************************************************************************;
                      00285 ;                     ULTRASONIC SENSOR SUBROUTINES                            ;
                      00286 ;******************************************************************************;
0054                  00287 USONIC_SEND_PULSE
0054   1586           00288         BSF         PORTB, 3
Warning[225]: Invalid label in operand (LCD_DLY)
0055   2001           00289         CALL        LCD_DLY
0056   1186           00290         BCF         PORTB, 3
Warning[225]: Invalid label in operand (LCD_DLY)
0057   2001           00291         CALL        LCD_DLY
0058   0008           00292         RETURN
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00293 
0059                  00294 USONIC_READ_ECHO
0059   0008           00295         RETURN
                      00296 
                      00297 ;******************************************************************************;
                      00298 ;                             STOP STANDBY                                     ;
                      00299 ;******************************************************************************;
005A                  00300 STOP_STDBY
005A   1C86           00301         BTFSS       PORTB, 1            ; Wait until data is available from the keypad
005B   2???           00302         GOTO        STOP_STDBY
                      00303 
005C   0E06           00304         SWAPF       PORTB, W            ; Read PortB<7:4> into W<3:0>
005D   390F           00305         ANDLW       0x0F 
005E   2???           00306         CALL        CLR_LCD
005F   2???           00307         GOTO        STOP_DATA
                      00308 
                      00309 ;******************************************************************************;
                      00310 ;                               DISPLAY DATA                                   ;
                      00311 ;******************************************************************************;
0060                  00312 STOP_DATA
0060   3004           00313         MOVLW       b'00000100'
0061   00CB           00314         MOVWF       spot_count
                      00315 
0062   3034           00316         MOVLW       "4"
0063   00CC           00317         MOVWF       num_spots
                      00318         
0064   2???           00319         CALL        WRT_DATA
0065   2???           00320         CALL        LONG_DLY
0066   2???           00321         CALL        LONG_DLY
0067   2???           00322         CALL        LONG_DLY
0068   2???           00323         CALL        LONG_DLY
0069   2???           00324         CALL        LONG_DLY
006A   2???           00325         CALL        LONG_DLY
006B   2???           00326         CALL        LONG_DLY
006C   2???           00327         CALL        LONG_DLY
006D   2???           00328         CALL        LONG_DLY
006E   2???           00329         CALL        LONG_DLY
006F   2???           00330         CALL        LONG_DLY
0070   2???           00331         CALL        LONG_DLY
                      00332         
0071   2???           00333         CALL        CLR_LCD
                      00334         
0072   304D           00335         MOVLW       spot_base_loc
0073   0084           00336         MOVWF       FSR
                      00337         
0074   3031           00338         MOVLW       "1"
0075   00CD           00339         MOVWF       spot_base_loc
                      00340         
0076   3033           00341         MOVLW       "3"
0077   00CE           00342         MOVWF       spot_base_loc + 1
                      00343         
0078   3036           00344         MOVLW       "6"
0079   00CF           00345         MOVWF       spot_base_loc + 2
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00346         
007A   3038           00347         MOVLW       "8"
007B   00D0           00348         MOVWF       spot_base_loc + 3
                      00349         
                      00350         
007C                  00351 DATA_LOOP       
                      00352         WRT_LCD     "S"
007C   3053               M         MOVLW       "S"
007D   2???               M         CALL        LCD_CMD
                      00353         WRT_LCD     "P"
007E   3050               M         MOVLW       "P"
007F   2???               M         CALL        LCD_CMD
                      00354         WRT_LCD     "O"
0080   304F               M         MOVLW       "O"
0081   2???               M         CALL        LCD_CMD
                      00355         WRT_LCD     "T"
0082   3054               M         MOVLW       "T"
0083   2???               M         CALL        LCD_CMD
                      00356         WRT_LCD     ":"
0084   303A               M         MOVLW       ":"
0085   2???               M         CALL        LCD_CMD
                      00357         WRT_LCD     " "
0086   3020               M         MOVLW       " "
0087   2???               M         CALL        LCD_CMD
                      00358         WRT_MEM_LCD INDF
0088   0800               M         MOVFW       INDF
0089   2???               M         CALL        LCD_CMD
                      00359         WRT_LCD     "c"
008A   3063               M         MOVLW       "c"
008B   2???               M         CALL        LCD_CMD
                      00360         WRT_LCD     "m"
008C   306D               M         MOVLW       "m"
008D   2???               M         CALL        LCD_CMD
                      00361         
008E   2???           00362         CALL        LONG_DLY
008F   2???           00363         CALL        LONG_DLY
0090   2???           00364         CALL        LONG_DLY
0091   2???           00365         CALL        LONG_DLY
0092   2???           00366         CALL        LONG_DLY
0093   2???           00367         CALL        LONG_DLY
0094   2???           00368         CALL        LONG_DLY
0095   2???           00369         CALL        LONG_DLY
0096   2???           00370         CALL        LONG_DLY
0097   2???           00371         CALL        CLR_LCD
0098   0A84           00372         INCF        FSR, F
                      00373 
0099   0BCB           00374         DECFSZ      spot_count, F
009A   2???           00375         GOTO        DATA_LOOP
                      00376         
                      00377         WRT_LCD     "E"
009B   3045               M         MOVLW       "E"
009C   2???               M         CALL        LCD_CMD
                      00378         WRT_LCD     "N"
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

009D   304E               M         MOVLW       "N"
009E   2???               M         CALL        LCD_CMD
                      00379         WRT_LCD     "D"
009F   3044               M         MOVLW       "D"
00A0   2???               M         CALL        LCD_CMD
                      00380 
00A1   2???           00381         GOTO        FINISH
                      00382         
                      00383 ;******************************************************************************;
                      00384 ;                           LCD INITIALIZATION                                 ;
                      00385 ;******************************************************************************;
00A2                  00386 LCD_INIT
00A2   1283           00387         BCF         STATUS, RP0
00A3   1588           00388         BSF         PORTD, E        ;E default high
                      00389 
                      00390                                     ;Wait for LCD POR to finish (~15ms)
00A4   2???           00391         CALL        LCD_LONG_DELAY
00A5   2???           00392         CALL        LCD_LONG_DELAY
00A6   2???           00393         CALL        LCD_LONG_DELAY
                      00394 
                      00395                                     ;Ensure 8-bit mode first (no way to immediately guarantee 4-bit mode
                            )
                      00396                                     ; -> Send b'0011' 3 times
00A7   1108           00397         BCF         PORTD,RS        ;Instruction mode
00A8   3030           00398         MOVLW       B'00110000'
00A9   2???           00399         CALL        MovMSB
00AA   2???           00400         CALL        LCD_LONG_DELAY
00AB   2???           00401         CALL        LCD_LONG_DELAY
00AC   2???           00402         CALL        ClkLCD          ;Finish last 4-bit send (if reset occurred in middle of a send)
00AD   2???           00403         CALL        LCD_LONG_DELAY  ;->max instruction time ~= 5ms
00AE   2???           00404         CALL        ClkLCD          ;Assuming 4-bit mode, set 8-bit mode
00AF   2???           00405         CALL        ClkLCD          ;(note: if it's in 8-bit mode already, it will stay in 8-bit mode)
                      00406 
                      00407                                     ;Now that we know for sure it's in 8-bit mode, set 4-bit mode.
00B0   3020           00408         MOVLW       B'00100000'
00B1   2???           00409         CALL        MovMSB
00B2   2???           00410         CALL        LCD_LONG_DELAY
00B3   2???           00411         CALL        LCD_LONG_DELAY
00B4   2???           00412         CALL        ClkLCD
                      00413 
                      00414                                     ;Give LCD init instructions
                      00415         WRT_LCD     B'00101000'     ; 4 bits, 2 lines,5X8 dot
00B5   3028               M         MOVLW       B'00101000'
00B6   2???               M         CALL        LCD_CMD
00B7   2???           00416         CALL        LCD_LONG_DELAY
00B8   2???           00417         CALL        LCD_LONG_DELAY
                      00418         
                      00419         WRT_LCD     B'00001111'     ; display on,cursor,blink
00B9   300F               M         MOVLW       B'00001111'
00BA   2???               M         CALL        LCD_CMD
00BB   2???           00420         CALL        LCD_LONG_DELAY
00BC   2???           00421         CALL        LCD_LONG_DELAY
                      00422         WRT_LCD     B'00000110'     ; Increment,no shift
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00BD   3006               M         MOVLW       B'00000110'
00BE   2???               M         CALL        LCD_CMD
00BF   2???           00423         CALL        LCD_LONG_DELAY
00C0   2???           00424         CALL        LCD_LONG_DELAY
                      00425                                     ;Ready to display characters
00C1   2???           00426         CALL        CLR_LCD
00C2   1508           00427         BSF         PORTD,RS        ; Character mode
00C3   0008           00428         RETURN
                      00429 
                      00430 ;******************************************************************************;
                      00431 ;                                  HELLO                                       ;
                      00432 ;******************************************************************************;
00C4                  00433 START_MSG
                      00434         WRT_LCD     "H"
00C4   3048               M         MOVLW       "H"
00C5   2???               M         CALL        LCD_CMD
                      00435         WRT_LCD     "I"
00C6   3049               M         MOVLW       "I"
00C7   2???               M         CALL        LCD_CMD
                      00436         WRT_LCD     "T"
00C8   3054               M         MOVLW       "T"
00C9   2???               M         CALL        LCD_CMD
                      00437         WRT_LCD     " "
00CA   3020               M         MOVLW       " "
00CB   2???               M         CALL        LCD_CMD
                      00438         WRT_LCD     "*"
00CC   302A               M         MOVLW       "*"
00CD   2???               M         CALL        LCD_CMD
                      00439         WRT_LCD     " "
00CE   3020               M         MOVLW       " "
00CF   2???               M         CALL        LCD_CMD
                      00440         WRT_LCD     "T"
00D0   3054               M         MOVLW       "T"
00D1   2???               M         CALL        LCD_CMD
                      00441         WRT_LCD     "O"
00D2   304F               M         MOVLW       "O"
00D3   2???               M         CALL        LCD_CMD
                      00442         WRT_LCD     " "
00D4   3020               M         MOVLW       " "
00D5   2???               M         CALL        LCD_CMD
                      00443         WRT_LCD     "S"
00D6   3053               M         MOVLW       "S"
00D7   2???               M         CALL        LCD_CMD
                      00444         WRT_LCD     "T"
00D8   3054               M         MOVLW       "T"
00D9   2???               M         CALL        LCD_CMD
                      00445         WRT_LCD     "A"
00DA   3041               M         MOVLW       "A"
00DB   2???               M         CALL        LCD_CMD
                      00446         WRT_LCD     "R"
00DC   3052               M         MOVLW       "R"
00DD   2???               M         CALL        LCD_CMD
                      00447         WRT_LCD     "T"
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DE   3054               M         MOVLW       "T"
00DF   2???               M         CALL        LCD_CMD
00E0   0008           00448         RETURN
                      00449         
                      00450 ;******************************************************************************;
                      00451 ;                                GOODBYE                                       ;
                      00452 ;******************************************************************************;
00E1                  00453 STOP_STDBY_MSG
                      00454         WRT_LCD     "H"
00E1   3048               M         MOVLW       "H"
00E2   2???               M         CALL        LCD_CMD
                      00455         WRT_LCD     "I"
00E3   3049               M         MOVLW       "I"
00E4   2???               M         CALL        LCD_CMD
                      00456         WRT_LCD     "T"
00E5   3054               M         MOVLW       "T"
00E6   2???               M         CALL        LCD_CMD
                      00457         WRT_LCD     " "
00E7   3020               M         MOVLW       " "
00E8   2???               M         CALL        LCD_CMD
                      00458         WRT_LCD     "*"
00E9   302A               M         MOVLW       "*"
00EA   2???               M         CALL        LCD_CMD
                      00459         WRT_LCD     " "
00EB   3020               M         MOVLW       " "
00EC   2???               M         CALL        LCD_CMD
                      00460         WRT_LCD     "F"
00ED   3046               M         MOVLW       "F"
00EE   2???               M         CALL        LCD_CMD
                      00461         WRT_LCD     "O"
00EF   304F               M         MOVLW       "O"
00F0   2???               M         CALL        LCD_CMD
                      00462         WRT_LCD     "R"
00F1   3052               M         MOVLW       "R"
00F2   2???               M         CALL        LCD_CMD
                      00463         WRT_LCD     " "
00F3   3020               M         MOVLW       " "
00F4   2???               M         CALL        LCD_CMD
                      00464         WRT_LCD     "D"
00F5   3044               M         MOVLW       "D"
00F6   2???               M         CALL        LCD_CMD
                      00465         WRT_LCD     "A"
00F7   3041               M         MOVLW       "A"
00F8   2???               M         CALL        LCD_CMD
                      00466         WRT_LCD     "T"
00F9   3054               M         MOVLW       "T"
00FA   2???               M         CALL        LCD_CMD
                      00467         WRT_LCD     "A"
00FB   3041               M         MOVLW       "A"
00FC   2???               M         CALL        LCD_CMD
00FD   0008           00468         RETURN
                      00469          
                      00470 ;******************************************************************************;
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00471 ;                                 DATA                                         ;
                      00472 ;******************************************************************************;
00FE                  00473 WRT_DATA        
                      00474         WRT_LCD     "N"
00FE   304E               M         MOVLW       "N"
00FF   2???               M         CALL        LCD_CMD
                      00475         WRT_LCD     "U"
0100   3055               M         MOVLW       "U"
0101   2???               M         CALL        LCD_CMD
                      00476         WRT_LCD     "M"
0102   304D               M         MOVLW       "M"
0103   2???               M         CALL        LCD_CMD
                      00477         WRT_LCD     " "
0104   3020               M         MOVLW       " "
0105   2???               M         CALL        LCD_CMD
                      00478         WRT_LCD     "S"
0106   3053               M         MOVLW       "S"
0107   2???               M         CALL        LCD_CMD
                      00479         WRT_LCD     "P"
0108   3050               M         MOVLW       "P"
0109   2???               M         CALL        LCD_CMD
                      00480         WRT_LCD     "O"
010A   304F               M         MOVLW       "O"
010B   2???               M         CALL        LCD_CMD
                      00481         WRT_LCD     "T"
010C   3054               M         MOVLW       "T"
010D   2???               M         CALL        LCD_CMD
                      00482         WRT_LCD     "S"
010E   3053               M         MOVLW       "S"
010F   2???               M         CALL        LCD_CMD
                      00483         WRT_LCD     ":"
0110   303A               M         MOVLW       ":"
0111   2???               M         CALL        LCD_CMD
                      00484         WRT_LCD     " "
0112   3020               M         MOVLW       " "
0113   2???               M         CALL        LCD_CMD
                      00485         WRT_MEM_LCD num_spots
0114   084C               M         MOVFW       num_spots
0115   2???               M         CALL        LCD_CMD
0116   0008           00486         RETURN
                      00487 ;******************************************************************************;                
                      00488 ;******************************************************************************;
                      00489 ;******************************************************************************;
                      00490         ;WrtLCD: Clock MSB and LSB of W to PORTD<7:4> in two cycles
0117                  00491 LCD_CMD
0117   00BC           00492         MOVWF       lcd_tmp         ; store original value
0118   2???           00493         CALL        MovMSB          ; move MSB to PORTD 
0119   2???           00494         CALL        ClkLCD
011A   0E3C           00495         SWAPF       lcd_tmp,w       ; Swap LSB of value into MSB of W
011B   2???           00496         CALL        MovMSB          ; move to PORTD
011C   2???           00497         CALL        ClkLCD
011D   0008           00498         RETURN
                      00499 
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

011E                  00500 SHIFT_LCD
011E   1108           00501         BCF         PORTD, RS
                      00502         WRT_LCD     B'00011000'
011F   3018               M         MOVLW       B'00011000'
0120   2???               M         CALL        LCD_CMD
0121   2???           00503         CALL        LONG_DLY
0122   2???           00504         CALL        LONG_DLY
0123   2???           00505         CALL        LONG_DLY
0124   2???           00506         CALL        LONG_DLY
0125   1508           00507         BSF         PORTD, RS
0126   0008           00508         RETURN
                      00509         
                      00510     ;ClrLCD: Clear the LCD display
0127                  00511 CLR_LCD
0127   1108           00512         BCF         PORTD, RS       ; Instruction mode
                      00513         WRT_LCD     b'00000001'
0128   3001               M         MOVLW       b'00000001'
0129   2???               M         CALL        LCD_CMD
012A   2???           00514         CALL        LCD_LONG_DELAY
012B   1508           00515         BSF         PORTD, RS
012C   0008           00516         RETURN
                      00517 
                      00518     ;ClkLCD: Pulse the E line low
012D                  00519 ClkLCD
                      00520         LCD_DLY
012D   30FF               M         MOVLW       0xFF
012E   00BD               M         MOVWF       lcd_d1
012F   0BBD               M         DECFSZ      lcd_d1, f
0130   2???               M         GOTO        $-1
0131   1188           00521         BCF         PORTD,E
                      00522         LCD_DLY             ; __    __
0132   30FF               M         MOVLW       0xFF
0133   00BD               M         MOVWF       lcd_d1
0134   0BBD               M         DECFSZ      lcd_d1, f
0135   2???               M         GOTO        $-1
0136   1588           00523         BSF         PORTD,E ;   |__|
0137   0008           00524         RETURN
                      00525 
                      00526     ;****************************************
                      00527 
                      00528     ;MovMSB: Move MSB of W to PORTD, without disturbing LSB
0138                  00529 MovMSB
0138   39F0           00530         ANDLW       0xF0
0139   0488           00531         IORWF       PORTD,f
013A   380F           00532         IORLW       0x0F
013B   0588           00533         ANDWF       PORTD,f
013C   0008           00534         RETURN
                      00535 
013D                  00536 LONG_DLY
Warning[202]: Argument out of range.  Least significant bits used.
013D   30FF           00537         MOVLW       0xFFFF
013E   00BF           00538         MOVWF       long_del
013F                  00539 LD_LOOP 
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00540         LCD_DLY
013F   30FF               M         MOVLW       0xFF
0140   00BD               M         MOVWF       lcd_d1
0141   0BBD               M         DECFSZ      lcd_d1, f
0142   2???               M         GOTO        $-1
0143   0BBF           00541         DECFSZ      long_del, f
0144   2???           00542         GOTO        LD_LOOP
0145   0008           00543         RETURN
                      00544         
                      00545     ;Delay: ~5ms
0146                  00546 LCD_LONG_DELAY
0146   3014           00547         MOVLW       d'20'
0147   00BE           00548         MOVWF       lcd_d2
0148                  00549 LLD_LOOP
                      00550         LCD_DLY
0148   30FF               M         MOVLW       0xFF
0149   00BD               M         MOVWF       lcd_d1
014A   0BBD               M         DECFSZ      lcd_d1, f
014B   2???               M         GOTO        $-1
014C   0BBE           00551         DECFSZ      lcd_d2, f
014D   2???           00552         GOTO        LLD_LOOP
014E   0008           00553         RETURN
                      00554 
014F                  00555 asdfasdf
                      00556         ;SEND "MIN SEC" HEADER
014F   300C           00557         movlw     0x0C           ; Clear display
0150   2???           00558         call      LCD_CMD
0151   304D           00559         movlw     "M"
0152   2???           00560         call      LCD_CMD
0153   3049           00561         movlw     "I"
0154   2???           00562         call      LCD_CMD
0155   304E           00563         movlw     "N"
0156   2???           00564         call      LCD_CMD
0157   3020           00565         movlw     " "
0158   2???           00566         call      LCD_CMD
0159   3020           00567         movlw     " "
015A   2???           00568         call      LCD_CMD
015B   3053           00569         movlw     "S"
015C   2???           00570         call      LCD_CMD
015D   3045           00571         movlw     "E"
015E   2???           00572         call      LCD_CMD
015F   3043           00573         movlw     "C"
0160   2???           00574         call      LCD_CMD
0161   300A           00575         movlw     0xA             ; new line
0162   2???           00576         call      LCD_CMD
0163   300D           00577         movlw     0xD
0164   2???           00578         call      LCD_CMD
                      00579 
                      00580         ;READ MINUTE
0165   3001           00581         movlw     0x01            ; Read minute
0166   00B6           00582         movwf     ADD
0167   2???           00583         call      rd
0168   0839           00584         movf      DOUT,w
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0169   2???           00585         call      ADJT            ; display minute
                      00586 
016A   3020           00587         movlw     " "
016B   2???           00588         call      LCD_CMD
016C   3020           00589         movlw     " "
016D   2???           00590         call      LCD_CMD
016E   3020           00591         movlw     " "
016F   2???           00592         call      LCD_CMD
                      00593 
                      00594         ;READ SECOND
0170   3000           00595         movlw     0x00            ; Read second
0171   00B6           00596         movwf     ADD
0172   2???           00597         call      rd              ; call read sub
0173   0839           00598         movf      DOUT,w
0174   2???           00599         call      ADJT            ; display second
                      00600 
0175   2???           00601         call      SDel
0176   2???           00602         goto      asdfasdf
                      00603 
                      00604 ;**********************************************************
                      00605 ; Convert time 1 byte to ASCII 2 bytes and send to display
                      00606 ; Input  : W
                      00607 ; Output : -
                      00608 ;**********************************************************
0177                  00609 ADJT      
0177   00BA           00610         movwf     B1             ; B1 = HHHH LLLL
0178   0E3A           00611         swapf     B1,w           ; W  = LLLL HHHH
0179   390F           00612         andlw     0x0f           ; Mask upper four bits 0000 HHHH
017A   3E30           00613         addlw     0x30           ; convert to ASCII
017B   2???           00614         call      LCD_CMD           ; Send first digit
017C   083A           00615         movf      B1,w
017D   390F           00616         andlw     0x0f           ; w  = 0000 LLLL
017E   3E30           00617         addlw     0x30           ; convert to ASCII
017F   2???           00618         call      LCD_CMD
0180   0008           00619         return
                      00620 
                      00621 ;********************************************************
                      00622 ; Send data to RS-232
                      00623 ; Input  : W
                      00624 ; Output : Computer screen
                      00625 ;********************************************************
0181                  00626 SEND
0181   1283 1303      00627         banksel   TXREG
0183   0099           00628         movwf     TXREG          ; Send recent data to TX
0184   1683           00629         bsf       STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0185   1C98           00630         btfss     TXSTA,1        ; check TRMT bit in TXSTA register
0186   2???           00631         goto      $-1            ; TXREG full  or TRMT = 0
0187   1283           00632         bcf       STATUS,RP0
0188   0008           00633         return
                      00634 
                      00635 ;***********************************************
                      00636 ;  I2C Support Functions
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00637 ;***********************************************
                      00638 
                      00639 ;CHECK_ACK: If bad ACK bit received, goto err_address
                      00640 CHECK_ACK   macro   err_address
                      00641         btfsc       SSPCON2,ACKSTAT
                      00642         goto        err_address
                      00643         endm
                      00644 
                      00645 ;******************************************
                      00646 ; Write data DAT to register ADD of the RTC
                      00647 ; Input   : ADD,DAT
                      00648 ; Output  : EEPROM
                      00649 ;******************************************
0189                  00650 wr
                      00651         ;Select the DS1307 on the bus, in WRITE mode
0189   2???           00652         call        I2CStart
018A   30D0           00653         movlw       0xD0        ;DS1307 address | WRITE bit
018B   2???           00654         call        I2CWrite
                      00655         CHECK_ACK   WR_ERR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
018C   1B11               M         btfsc       SSPCON2,ACKSTAT
018D   2???               M         goto        WR_ERR
                      00656 
                      00657         ;Write data to I2C bus (Register Address in RTC)
018E   0836           00658         movf        ADD,w       ;Set register pointer in RTC
018F   2???           00659         call        I2CWrite
                      00660         CHECK_ACK   WR_ERR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0190   1B11               M         btfsc       SSPCON2,ACKSTAT
0191   2???               M         goto        WR_ERR
                      00661 
                      00662         ;Write data to I2C bus (Data to be placed in RTC register)
0192   0837           00663         movf        DAT,w       ;Write data to register in RTC
0193   2???           00664         call        I2CWrite
                      00665         CHECK_ACK   WR_ERR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0194   1B11               M         btfsc       SSPCON2,ACKSTAT
0195   2???               M         goto        WR_ERR
0196   2???           00666         goto        WR_END
                      00667 
0197   1283           00668 WR_ERR  bcf         STATUS,RP0
0198   3045           00669         movlw       "E"
0199   2???           00670         call        SEND
                      00671         
                      00672         ;Release the I2C bus
019A   2???           00673 WR_END  call        I2CStop
019B   0008           00674         return
                      00675 
                      00676 ;************************************
                      00677 ; Read data
                      00678 ; Input   : ADD
                      00679 ; Output  : DOUT
                      00680 ;************************************
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

019C                  00681 rd
                      00682         ;Select the DS1307 on the bus, in WRITE mode
019C   2???           00683         call        I2CStart
019D   30D0           00684         movlw       0xD0        ;DS1307 address | WRITE bit
019E   2???           00685         call        I2CWrite
                      00686         CHECK_ACK   RD_ERR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
019F   1B11               M         btfsc       SSPCON2,ACKSTAT
01A0   2???               M         goto        RD_ERR
                      00687 
                      00688         ;Write data to I2C bus (Register Address in RTC)
01A1   0836           00689         movf        ADD,w       ;Set register pointer in RTC
01A2   2???           00690         call        I2CWrite
                      00691         CHECK_ACK   RD_ERR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01A3   1B11               M         btfsc       SSPCON2,ACKSTAT
01A4   2???               M         goto        RD_ERR
                      00692 
                      00693         ;Re-Select the DS1307 on the bus, in READ mode
01A5   2???           00694         call        I2CRepeatedStart
01A6   30D1           00695         movlw       0xD1        ;DS1307 address | READ bit
01A7   2???           00696         call        I2CWrite
                      00697         CHECK_ACK   RD_ERR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01A8   1B11               M         btfsc       SSPCON2,ACKSTAT
01A9   2???               M         goto        RD_ERR
                      00698 
                      00699         ;Read data from I2C bus (Contents of Register in RTC)
01AA   2???           00700         call        I2CRead
01AB   00B9           00701         movwf       DOUT
01AC   2???           00702         call        I2CNak      ;Send acknowledgement of data reception
                      00703         
01AD   2???           00704         goto        RD_END
                      00705 
01AE   1283           00706 RD_ERR  bcf         STATUS,RP0
01AF   3045           00707         movlw       "E"
01B0   2???           00708         call        SEND
                      00709         
                      00710         ;Release the I2C bus
01B1   2???           00711 RD_END  call        I2CStop
01B2   0008           00712         return
                      00713 
                      00714 
                      00715 I2CCondition   macro   condition
                      00716         banksel     SSPCON2
                      00717         bsf         SSPCON2,condition
                      00718         btfsc       SSPCON2,condition
                      00719         goto        $-1
                      00720         endm
01B3                  00721 I2CStart
                      00722         I2CCondition    SEN
01B3   1683 1303          M         banksel     SSPCON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01B5   1411               M         bsf         SSPCON2,SEN
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01B6   1811               M         btfsc       SSPCON2,SEN
01B7   2???               M         goto        $-1
01B8   0008           00723         return
01B9                  00724 I2CRepeatedStart    ;Repeated Start, generally used to change IO direction
                      00725         I2CCondition    RSEN
01B9   1683 1303          M         banksel     SSPCON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01BB   1491               M         bsf         SSPCON2,RSEN
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01BC   1891               M         btfsc       SSPCON2,RSEN
01BD   2???               M         goto        $-1
01BE   0008           00726         return
01BF                  00727 I2CStop
                      00728         I2CCondition    PEN
01BF   1683 1303          M         banksel     SSPCON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01C1   1511               M         bsf         SSPCON2,PEN
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01C2   1911               M         btfsc       SSPCON2,PEN
01C3   2???               M         goto        $-1
01C4   0008           00729         return
                      00730         
01C5                  00731 I2CAck
01C5   1683 1303      00732         banksel     SSPCON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01C7   1291           00733         bcf         SSPCON2,ACKDT
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01C8   1611           00734         bsf         SSPCON2,ACKEN
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01C9   1A11           00735         btfsc       SSPCON2,ACKEN
01CA   2???           00736         goto        $-1
01CB   0008           00737         return
01CC                  00738 I2CNak
01CC   1683 1303      00739         banksel     SSPCON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01CE   1691           00740         bsf         SSPCON2,ACKDT
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01CF   1611           00741         bsf         SSPCON2,ACKEN
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01D0   1A11           00742         btfsc       SSPCON2,ACKEN
01D1   2???           00743         goto        $-1
01D2   0008           00744         return
                      00745 
                      00746 ;*********************************************
                      00747 ;I2CWrite: Blocking write of 'w' to slave device.
                      00748 ;       Selects register bank1 so you can check
                      00749 ;       SSPCON2,ACKSTAT immediately after.
                      00750 ;*********************************************
01D3                  00751 I2CWrite
01D3   1283 1303      00752         banksel     SSPBUF
01D5   0093           00753         movwf       SSPBUF
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01D6   1683 1303      00754         banksel     SSPSTAT
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01D8   1914           00755         btfsc       SSPSTAT,R_W ;While transmit is in progress, wait
01D9   2???           00756         goto        $-1
01DA   1683 1303      00757         banksel     SSPCON2
01DC   0008           00758         return
                      00759         
                      00760 ;*********************************************
                      00761 ;I2CRead: Blocking read from slave device.
                      00762 ;Input:   None
                      00763 ;Output:  W
                      00764 ;*********************************************
01DD                  00765 I2CRead
01DD   1683 1303      00766         banksel     SSPCON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01DF   1591           00767         bsf         SSPCON2,RCEN    ;Begin receiving byte from
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
01E0   1991           00768         btfsc       SSPCON2,RCEN
01E1   2???           00769         goto        $-1
01E2   1283 1303      00770         banksel     SSPBUF
01E4   0813           00771         movf        SSPBUF,w
01E5   0008           00772         return
                      00773 
                      00774 ;******************************
                      00775 ; Short delay
                      00776 ;******************************
01E6   3000           00777 SDel      movlw     0x00
01E7   00B0           00778           movwf     dt1
01E8   3000           00779 sd2       movlw     0x00
01E9   00B1           00780           movwf     dt2
Message[305]: Using default destination of 1 (file).
01EA   0BB1           00781 sd1       decfsz    dt2
01EB   2???           00782           goto      sd1
Message[305]: Using default destination of 1 (file).
01EC   0BB0           00783           decfsz    dt1
01ED   2???           00784           goto      sd2
01EE   0008           00785           return
01EF                  00786 FINISH  
01EF   2???           00787         GOTO    FINISH
                      00788         
3F72                  00789         END
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADD                               00000036
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADJT                              00000177
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
ARM_TOGGLE                        0000004B
B1                                0000003A
B2                                0000003B
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
CALIBRATE                         0000002D
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHECK_ACK                         
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

CKE                               00000006
CKP                               00000004
CLR_LCD                           00000127
CONTROL                           00000035
CREN                              00000004
CSRC                              00000007
ClkLCD                            0000012D
D                                 00000005
DAT                               00000037
DATA_ADDRESS                      00000005
DATA_LOOP                         0000007C
DC                                00000001
DOUT                              00000039
D_A                               00000005
D_NOT_A                           00000005
E                                 00000003
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
END_ISR                           00000053
F                                 00000001
FERR                              00000002
FINISH                            000001EF
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
I2CAck                            000001C5
I2CCondition                      
I2CNak                            000001CC
I2CRead                           000001DD
I2CRepeatedStart                  000001B9
I2CStart                          000001B3
I2CStop                           000001BF
I2CWrite                          000001D3
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INIT                              00000005
INTCON                            0000000B
INTE                              00000004
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

INTEDG                            00000006
INTF                              00000001
INT_HANDLER                       00000033
IRP                               00000007
LCD_CMD                           00000117
LCD_DLY                           
LCD_INIT                          000000A2
LCD_LONG_DELAY                    00000146
LD_LOOP                           0000013F
LLD_LOOP                          00000148
LONG_DLY                          0000013D
MULT                              
MovMSB                            00000138
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
PWML                              0000003D
PWML_DN                           00000040
PWMR                              00000044
PWMR_DN                           00000047
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RD_END                            000001B1
RD_ERR                            000001AE
RE0                               00000000
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
REALIGN                           0000004C
RP0                               00000005
RP1                               00000006
RS                                00000002
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SCAN                              0000002E
SDel                              000001E6
SEN                               00000000
SEND                              00000181
SHIFT_LCD                         0000011E
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
START_MSG                         000000C4
START_STDBY                       00000022
STATUS                            00000003
STOP_DATA                         00000060
STOP_STDBY                        0000005A
STOP_STDBY_MSG                    000000E1
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOASCII                           
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
USONIC_READ_ECHO                  00000059
USONIC_SEND_PULSE                 00000054
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WRT_DATA                          000000FE
WRT_LCD                           
WRT_MEM_LCD                       
WR_END                            0000019A
WR_ERR                            00000197
XBUF                              00000033
Z                                 00000002
_.org_1_0028                      00000028
_.org_1_0130                      00000130
_.org_1_0135                      00000135
_.org_1_0142                      00000142
_.org_1_014B                      0000014B
_.org_1_0186                      00000186
_.org_1_01B7                      000001B7
_.org_1_01BD                      000001BD
_.org_1_01C3                      000001C3
_.org_1_01CA                      000001CA
_.org_1_01D1                      000001D1
_.org_1_01D9                      000001D9
_.org_1_01E1                      000001E1
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_WRT_OFF                          00003DFF
_WRT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
asdfasdf                          0000014F
count                             00000034
dt1                               00000030
dt2                               00000031
dt3                               00000032
flag                              00000038
l_pwm_duty                        00000049
lcd_d1                            0000003D
lcd_d2                            0000003E
lcd_tmp                           0000003C
long_del                          0000003F
measured_distance                 00000047
mult_val1                         00000042
mult_val2                         00000043
num_spots                         0000004C
p_gain                            00000048
pwm_state                         00000044
r_pwm_duty                        0000004A
rd                                0000019C
rob_distance                      00000046
sd1                               000001EA
sd2                               000001E8
spot_base_loc                     0000004D
MPASM 5.65                          MAIN.ASM   2-25-2016  7:40:55         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

spot_count                        0000004B
temp_status                       00000041
temp_w                            00000040
threshold_distance                00000045
wr                                00000189

Errors   :     0
Warnings :     4 reported,     0 suppressed
Messages :    34 reported,     0 suppressed

