MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001         include <p16f877.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Dec 08 2015
                      00005 ;  MPASM PIC16F877 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2015 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00541         LIST
                      00002         errorlevel      -302
                      00003         errorlevel      -305
                      00004 
                      00005 ;global labels
                      00006 
  0000                00007         global  write_rtc,read_rtc,rtc_convert,i2c_common_setup,p2p_write,p2p_read
                      00008 
                      00009 ;Definition and variable declarations;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00010         cblock    0x71                  ;these variable names are for reference only. The following
  00000071            00011         dt1                     ;0x71            addresses are used for the RTC module
  00000072            00012         dt2                     ;0x72
  00000073            00013         ADD                     ;0x73
  00000074            00014         DAT                     ;0x74
  00000075            00015         DOUT                    ;0x75
  00000076            00016         B1                      ;0x76
  00000077            00017         dig10                   ;0x77
  00000078            00018         dig1                    ;0x78
                      00019         endc
                      00020 
                      00021 ;I2C lowest layer macros;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00022 
                      00023 i2c_common_check_ack    macro   err_address             ;If bad ACK bit received, goto err_address
                      00024         banksel         SSPCON2
                      00025     btfsc       SSPCON2,ACKSTAT
                      00026     goto        err_address
                      00027         endm
                      00028 
                      00029 i2c_common_start        macro
                      00030 ;input:         none
                      00031 ;output:        none
                      00032 ;desc:          initiate start conditionon the bus
                      00033         banksel     SSPCON2
                      00034     bsf         SSPCON2,SEN
                      00035     btfsc       SSPCON2,SEN
                      00036     goto        $-1
                      00037         endm
                      00038 
                      00039 i2c_common_stop macro
                      00040 ;input:         none
                      00041 ;output:        none
                      00042 ;desc:          initiate stop condition on the bus
                      00043         banksel     SSPCON2
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00044     bsf         SSPCON2,PEN
                      00045     btfsc       SSPCON2,PEN
                      00046     goto        $-1
                      00047         endm
                      00048 
                      00049 i2c_common_repeatedstart        macro
                      00050 ;input:         none
                      00051 ;output:        none
                      00052 ;desc:          initiate repeated start on the bus. Usually used for
                      00053 ;                       changing direction of SDA without STOP event
                      00054         banksel     SSPCON2
                      00055     bsf         SSPCON2,RSEN
                      00056     btfsc       SSPCON2,RSEN
                      00057     goto        $-1
                      00058         endm
                      00059 
                      00060 i2c_common_ack          macro
                      00061 ;input:         none
                      00062 ;output:        none
                      00063 ;desc:          send an acknowledge to slave device
                      00064     banksel     SSPCON2
                      00065     bcf         SSPCON2,ACKDT
                      00066     bsf         SSPCON2,ACKEN
                      00067     btfsc       SSPCON2,ACKEN
                      00068     goto        $-1
                      00069     endm
                      00070 
                      00071 i2c_common_nack macro
                      00072 ;input:         none
                      00073 ;output:        none
                      00074 ;desc:          send an not acknowledge to slave device
                      00075    banksel     SSPCON2
                      00076    bsf         SSPCON2,ACKDT
                      00077    bsf         SSPCON2,ACKEN
                      00078    btfsc       SSPCON2,ACKEN
                      00079    goto        $-1
                      00080    endm
                      00081 
                      00082 i2c_common_write        macro   
                      00083 ;input:         W
                      00084 ;output:        to slave device
                      00085 ;desc:          writes W to SSPBUF and send to slave device. Make sure
                      00086 ;                       transmit is finished before continuing
                      00087    banksel     SSPBUF
                      00088    movwf       SSPBUF
                      00089    banksel     SSPSTAT
                      00090    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
                      00091    goto        $-1
                      00092    banksel     SSPCON2
                      00093    endm
                      00094 
                      00095 i2c_common_read macro
                      00096 ;input:         none
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00097 ;output:        W
                      00098 ;desc:          reads data from slave and saves it in W.
                      00099    banksel     SSPCON2
                      00100    bsf         SSPCON2,RCEN    ;Begin receiving byte from
                      00101    btfsc       SSPCON2,RCEN
                      00102    goto        $-1
                      00103    banksel     SSPBUF
                      00104    movf        SSPBUF,w
                      00105    endm
                      00106 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00107 
                      00108         code
                      00109 
0000                  00110 i2c_common_setup
                      00111 ;input:         none
                      00112 ;output:        none
                      00113 ;desc:          sets up I2C as master device with 100kHz baud rate
0000   1683 1303      00114         banksel         SSPSTAT
0002   0194           00115     clrf        SSPSTAT         ;I2C line levels, and clear all flags
0003   3018           00116     movlw       d'24'           ;100kHz baud rate: 10MHz osc / [4*(24+1)]
0004   1683 1303      00117         banksel         SSPADD
0006   0093           00118     movwf       SSPADD          ;RTC only supports 100kHz
                      00119 
0007   3008           00120     movlw       b'00001000'     ;Config SSP for Master Mode I2C
0008   1283 1303      00121         banksel         SSPCON
000A   0094           00122     movwf       SSPCON
000B   1694           00123     bsf         SSPCON,SSPEN    ;Enable SSP module
                      00124     i2c_common_stop                     ;Ensure the bus is free
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate stop condition on the bus
000C   1683 1303          M         banksel     SSPCON2
000E   1511               M     bsf         SSPCON2,PEN
000F   1911               M     btfsc       SSPCON2,PEN
0010   2???               M     goto        $-1
0011   0008           00125         return
                      00126 
                      00127 ;rtc Algorithms;;;;;;
                      00128 
0012                  00129 write_rtc
                      00130 ;input:         address of register in RTC
                      00131 ;output:        none
                      00132 ;Desc:          handles writing data to RTC
                      00133         ;Select the DS1307 on the bus, in WRITE mode
                      00134         i2c_common_start
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate start conditionon the bus
0012   1683 1303          M         banksel     SSPCON2
0014   1411               M     bsf         SSPCON2,SEN
0015   1811               M     btfsc       SSPCON2,SEN
0016   2???               M     goto        $-1
0017   30D0           00135         movlw       0xD0        ;DS1307 address | WRITE bit
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00136         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
0018   1283 1303          M    banksel     SSPBUF
001A   0093               M    movwf       SSPBUF
001B   1683 1303          M    banksel     SSPSTAT
001D   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
001E   2???               M    goto        $-1
001F   1683 1303          M    banksel     SSPCON2
                      00137         i2c_common_check_ack   WR_ERR
0021   1683 1303          M         banksel         SSPCON2
0023   1B11               M     btfsc       SSPCON2,ACKSTAT
0024   2???               M     goto        WR_ERR
                      00138 
                      00139         ;Write data to I2C bus (Register Address in RTC)
0025   1283 1303      00140                 banksel         0x73
0027   0873           00141         movf        0x73,w       ;Set register pointer in RTC
                      00142         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
0028   1283 1303          M    banksel     SSPBUF
002A   0093               M    movwf       SSPBUF
002B   1683 1303          M    banksel     SSPSTAT
002D   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
002E   2???               M    goto        $-1
002F   1683 1303          M    banksel     SSPCON2
                      00143         i2c_common_check_ack   WR_ERR
0031   1683 1303          M         banksel         SSPCON2
0033   1B11               M     btfsc       SSPCON2,ACKSTAT
0034   2???               M     goto        WR_ERR
                      00144 
                      00145         ;Write data to I2C bus (Data to be placed in RTC register)
0035   1283 1303      00146                 banksel         0x74
0037   0874           00147         movf        0x74,w       ;Write data to register in RTC
                      00148         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
0038   1283 1303          M    banksel     SSPBUF
003A   0093               M    movwf       SSPBUF
003B   1683 1303          M    banksel     SSPSTAT
003D   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
003E   2???               M    goto        $-1
003F   1683 1303          M    banksel     SSPCON2
                      00149         i2c_common_check_ack   WR_ERR
0041   1683 1303          M         banksel         SSPCON2
0043   1B11               M     btfsc       SSPCON2,ACKSTAT
0044   2???               M     goto        WR_ERR
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0045   2???           00150         goto        WR_END
0046                  00151 WR_ERR
0046   0000           00152         nop
0047                  00153 WR_END  
                      00154                 i2c_common_stop ;Release the I2C bus
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate stop condition on the bus
0047   1683 1303          M         banksel     SSPCON2
0049   1511               M     bsf         SSPCON2,PEN
004A   1911               M     btfsc       SSPCON2,PEN
004B   2???               M     goto        $-1
004C   0008           00155         return
                      00156 
004D                  00157 read_rtc
                      00158 ;input:         address of RTC
                      00159 ;output:        DOUT or 0x75
                      00160 ;Desc:          This reads from the selected address of the RTC
                      00161 ;                       and saves it into DOUT or address 0x75
                      00162         ;Select the DS1307 on the bus, in WRITE mode
                      00163         i2c_common_start
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate start conditionon the bus
004D   1683 1303          M         banksel     SSPCON2
004F   1411               M     bsf         SSPCON2,SEN
0050   1811               M     btfsc       SSPCON2,SEN
0051   2???               M     goto        $-1
0052   30D0           00164         movlw       0xD0        ;DS1307 address | WRITE bit
                      00165         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
0053   1283 1303          M    banksel     SSPBUF
0055   0093               M    movwf       SSPBUF
0056   1683 1303          M    banksel     SSPSTAT
0058   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
0059   2???               M    goto        $-1
005A   1683 1303          M    banksel     SSPCON2
                      00166         i2c_common_check_ack   RD_ERR
005C   1683 1303          M         banksel         SSPCON2
005E   1B11               M     btfsc       SSPCON2,ACKSTAT
005F   2???               M     goto        RD_ERR
                      00167 
                      00168         ;Write data to I2C bus (Register Address in RTC)
0060   1283 1303      00169                 banksel         0x73
0062   0873           00170         movf        0x73,w       ;Set register pointer in RTC
                      00171         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0063   1283 1303          M    banksel     SSPBUF
0065   0093               M    movwf       SSPBUF
0066   1683 1303          M    banksel     SSPSTAT
0068   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
0069   2???               M    goto        $-1
006A   1683 1303          M    banksel     SSPCON2
                      00172         i2c_common_check_ack   RD_ERR
006C   1683 1303          M         banksel         SSPCON2
006E   1B11               M     btfsc       SSPCON2,ACKSTAT
006F   2???               M     goto        RD_ERR
                      00173 
                      00174         ;Re-Select the DS1307 on the bus, in READ mode
                      00175         i2c_common_repeatedstart
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate repeated start on the bus. Usually used for
                          M ;                       changing direction of SDA without STOP event
0070   1683 1303          M         banksel     SSPCON2
0072   1491               M     bsf         SSPCON2,RSEN
0073   1891               M     btfsc       SSPCON2,RSEN
0074   2???               M     goto        $-1
0075   30D1           00176         movlw       0xD1        ;DS1307 address | READ bit
                      00177         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
0076   1283 1303          M    banksel     SSPBUF
0078   0093               M    movwf       SSPBUF
0079   1683 1303          M    banksel     SSPSTAT
007B   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
007C   2???               M    goto        $-1
007D   1683 1303          M    banksel     SSPCON2
                      00178         i2c_common_check_ack   RD_ERR
007F   1683 1303          M         banksel         SSPCON2
0081   1B11               M     btfsc       SSPCON2,ACKSTAT
0082   2???               M     goto        RD_ERR
                      00179 
                      00180         ;Read data from I2C bus (Contents of Register in RTC)
                      00181         i2c_common_read
                          M ;input:         none
                          M ;output:        W
                          M ;desc:          reads data from slave and saves it in W.
0083   1683 1303          M    banksel     SSPCON2
0085   1591               M    bsf         SSPCON2,RCEN    ;Begin receiving byte from
0086   1991               M    btfsc       SSPCON2,RCEN
0087   2???               M    goto        $-1
0088   1283 1303          M    banksel     SSPBUF
008A   0813               M    movf        SSPBUF,w
008B   1283 1303      00182                 banksel         0x75
008D   00F5           00183         movwf       0x75
                      00184         i2c_common_nack      ;Send acknowledgement of data reception
                          M ;input:         none
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;output:        none
                          M ;desc:          send an not acknowledge to slave device
008E   1683 1303          M    banksel     SSPCON2
0090   1691               M    bsf         SSPCON2,ACKDT
0091   1611               M    bsf         SSPCON2,ACKEN
0092   1A11               M    btfsc       SSPCON2,ACKEN
0093   2???               M    goto        $-1
                      00185         
0094   2???           00186         goto        RD_END
                      00187 
0095                  00188 RD_ERR 
0095   0000           00189         nop
                      00190         
                      00191         ;Release the I2C bus
                      00192 RD_END  i2c_common_stop
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate stop condition on the bus
0096   1683 1303          M         banksel     SSPCON2
0098   1511               M     bsf         SSPCON2,PEN
0099   1911               M     btfsc       SSPCON2,PEN
009A   2???               M     goto        $-1
009B   0008           00193         return
                      00194 
009C                  00195 rtc_convert   
                      00196 ;input:         W
                      00197 ;output:        dig10 (0x77), dig1 (0x78)
                      00198 ;desc:          This subroutine converts the binary number
                      00199 ;                       in W into a two digit ASCII number and place
                      00200 ;                       each digit into the corresponding registers
                      00201 ;                       dig10 or dig1
009C   1283 1303      00202         banksel 0x76
009E   00F6           00203         movwf   0x76             ; B1 = HHHH LLLL
009F   0E76           00204     swapf   0x76,w           ; W  = LLLL HHHH
00A0   390F           00205     andlw   0x0f           ; Mask upper four bits 0000 HHHH
00A1   3E30           00206     addlw   0x30           ; convert to ASCII
00A2   00F7           00207     movwf       0x77               ;saves into 10ths digit
                      00208 
00A3   1283 1303      00209         banksel 0x76
00A5   0876           00210     movf    0x76,w
00A6   390F           00211     andlw   0x0f           ; w  = 0000 LLLL
00A7   3E30           00212     addlw   0x30           ; convert to ASCII           
00A8   00F8           00213     movwf       0x78           ; saves into 1s digit
00A9   0008           00214         return
                      00215 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00216 
                      00217 
                      00218 ;pic to pic subroutines;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00AA                  00219 p2p_write
                      00220         ;Select the DS1307 on the bus, in WRITE mode
                      00221         i2c_common_start
                          M ;input:         none
                          M ;output:        none
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;desc:          initiate start conditionon the bus
00AA   1683 1303          M         banksel     SSPCON2
00AC   1411               M     bsf         SSPCON2,SEN
00AD   1811               M     btfsc       SSPCON2,SEN
00AE   2???               M     goto        $-1
00AF   3010           00222         movlw       b'00010000'
                      00223         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
00B0   1283 1303          M    banksel     SSPBUF
00B2   0093               M    movwf       SSPBUF
00B3   1683 1303          M    banksel     SSPSTAT
00B5   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
00B6   2???               M    goto        $-1
00B7   1683 1303          M    banksel     SSPCON2
                      00224         i2c_common_check_ack   W_END 
00B9   1683 1303          M         banksel         SSPCON2
00BB   1B11               M     btfsc       SSPCON2,ACKSTAT
00BC   2???               M     goto        W_END
                      00225 
00BD   1283 1303      00226                 banksel 0x70
00BF   0870           00227                 movf    0x70, W
                      00228         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
00C0   1283 1303          M    banksel     SSPBUF
00C2   0093               M    movwf       SSPBUF
00C3   1683 1303          M    banksel     SSPSTAT
00C5   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
00C6   2???               M    goto        $-1
00C7   1683 1303          M    banksel     SSPCON2
                      00229         i2c_common_check_ack   W_END 
00C9   1683 1303          M         banksel         SSPCON2
00CB   1B11               M     btfsc       SSPCON2,ACKSTAT
00CC   2???               M     goto        W_END
00CD   2???           00230         goto        W_END
00CE                  00231 W_END  
                      00232                 i2c_common_stop ;Release the I2C bus
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate stop condition on the bus
00CE   1683 1303          M         banksel     SSPCON2
00D0   1511               M     bsf         SSPCON2,PEN
00D1   1911               M     btfsc       SSPCON2,PEN
00D2   2???               M     goto        $-1
00D3   0008           00233         return
                      00234 
                      00235 
00D4                  00236 p2p_read
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00237         ;Select the DS1307 on the bus, in WRITE mode
                      00238         i2c_common_start
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate start conditionon the bus
00D4   1683 1303          M         banksel     SSPCON2
00D6   1411               M     bsf         SSPCON2,SEN
00D7   1811               M     btfsc       SSPCON2,SEN
00D8   2???               M     goto        $-1
00D9   3011           00239                 movlw       b'00010001'
                      00240         i2c_common_write
                          M ;input:         W
                          M ;output:        to slave device
                          M ;desc:          writes W to SSPBUF and send to slave device. Make sure
                          M ;                       transmit is finished before continuing
00DA   1283 1303          M    banksel     SSPBUF
00DC   0093               M    movwf       SSPBUF
00DD   1683 1303          M    banksel     SSPSTAT
00DF   1914               M    btfsc       SSPSTAT,R_W              ;While transmit is in progress, wait
00E0   2???               M    goto        $-1
00E1   1683 1303          M    banksel     SSPCON2
                      00241                 i2c_common_check_ack   R_END
00E3   1683 1303          M         banksel         SSPCON2
00E5   1B11               M     btfsc       SSPCON2,ACKSTAT
00E6   2???               M     goto        R_END
                      00242 
                      00243         i2c_common_read
                          M ;input:         none
                          M ;output:        W
                          M ;desc:          reads data from slave and saves it in W.
00E7   1683 1303          M    banksel     SSPCON2
00E9   1591               M    bsf         SSPCON2,RCEN    ;Begin receiving byte from
00EA   1991               M    btfsc       SSPCON2,RCEN
00EB   2???               M    goto        $-1
00EC   1283 1303          M    banksel     SSPBUF
00EE   0813               M    movf        SSPBUF,w
00EF   1283 1303      00244                 banksel         0x70
00F1   00F0           00245         movwf       0x70
                      00246         i2c_common_nack      ;Send acknowledgement of data reception
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          send an not acknowledge to slave device
00F2   1683 1303          M    banksel     SSPCON2
00F4   1691               M    bsf         SSPCON2,ACKDT
00F5   1611               M    bsf         SSPCON2,ACKEN
00F6   1A11               M    btfsc       SSPCON2,ACKEN
00F7   2???               M    goto        $-1
00F8                  00247 R_END
                      00248                 i2c_common_stop
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          initiate stop condition on the bus
00F8   1683 1303          M         banksel     SSPCON2
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00FA   1511               M     bsf         SSPCON2,PEN
00FB   1911               M     btfsc       SSPCON2,PEN
00FC   2???               M     goto        $-1
00FD   0008           00249         return
                      00250 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00251 
                      00252         end
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 11


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADD                               00000073
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
B1                                00000076
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
CKP                               00000004
CREN                              00000004
CSRC                              00000007
D                                 00000005
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 12


SYMBOL TABLE
  LABEL                             VALUE 

DAT                               00000074
DATA_ADDRESS                      00000005
DC                                00000001
DOUT                              00000075
D_A                               00000005
D_NOT_A                           00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 13


SYMBOL TABLE
  LABEL                             VALUE 

PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RD_END                            00000096
RD_ERR                            00000095
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_END                             000000F8
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WR_END                            00000047
WR_ERR                            00000046
W_END                             000000CE
Z                                 00000002
_.code_0010                       00000010
_.code_0016                       00000016
_.code_001E                       0000001E
_.code_002E                       0000002E
_.code_003E                       0000003E
_.code_004B                       0000004B
_.code_0051                       00000051
_.code_0059                       00000059
_.code_0069                       00000069
_.code_0074                       00000074
_.code_007C                       0000007C
_.code_0087                       00000087
_.code_0093                       00000093
_.code_009A                       0000009A
_.code_00AE                       000000AE
_.code_00B6                       000000B6
_.code_00C6                       000000C6
_.code_00D2                       000000D2
_.code_00D8                       000000D8
_.code_00E0                       000000E0
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

_.code_00EB                       000000EB
_.code_00F7                       000000F7
_.code_00FC                       000000FC
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_WRT_OFF                          00003DFF
_WRT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
dig1                              00000078
dig10                             00000077
dt1                               00000071
dt2                               00000072
i2c_common_ack                    
i2c_common_check_ack              
i2c_common_nack                   
i2c_common_read                   
i2c_common_repeatedstart          
i2c_common_setup                  00000000
i2c_common_start                  
MPASM 5.65                    I2C_COMMON.ASM   3-24-2016  11:41:09         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

i2c_common_stop                   
i2c_common_write                  
p2p_read                          000000D4
p2p_write                         000000AA
read_rtc                          0000004D
rtc_convert                       0000009C
write_rtc                         00000012

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,    50 suppressed

